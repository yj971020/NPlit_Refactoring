<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html class="no-js" lang="zxx">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<title>Near Me - NPLIT</title>
	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="shortcut icon" type="image/x-icon" href="/assets/images/logo/favicon.png" />
	<!-- Place favicon.ico in the root directory -->

	<!-- Web Font -->
	<link
		href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">

	<!-- ========================= CSS here ========================= -->
	<link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/assets/css/LineIcons.2.0.css" />
	<link rel="stylesheet" href="/assets/css/animate.css" />
	<link rel="stylesheet" href="/assets/css/tiny-slider.css" />
	<link rel="stylesheet" href="/assets/css/glightbox.min.css" />
	<link rel="stylesheet" href="/assets/css/main.css" />
	<!-- <script src="https://kit.fontawesome.com/4a6a853753.js" crossorigin="anonymous"></script> -->
	<script src="https://kit.fontawesome.com/4a6a853753.js" crossorigin="anonymous"></script>


	<style>
		.customoverlay {
			position: relative;
			bottom: 85px;
			border-radius: 6px;
			border: 1px solid #ccc;
			border-bottom: 2px solid #ddd;
			float: left;
		}

		.customoverlay:nth-of-type(n) {
			border: 0;
			box-shadow: 0px 1px 2px #888;
		}

		.customoverlay a {
			display: block;
			text-decoration: none;
			color: #000;
			text-align: center;
			border-radius: 6px;
			font-size: 14px;
			font-weight: bold;
			overflow: hidden;
			background: #d95050;
			background: #d95050 url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/arrow_white.png) no-repeat right 14px center;
		}

		.customoverlay .title {
			display: block;
			text-align: center;
			background: #fff;
			margin-right: 35px;
			padding: 10px 15px;
			font-size: 14px;
			font-weight: bold;
		}

		.customoverlay:after {
			content: '';
			position: absolute;
			margin-left: -12px;
			left: 50%;
			bottom: -12px;
			width: 22px;
			height: 12px;
			background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')
		}
	</style>
</head>

<body>
	<!--[if lte IE 9]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="https://browsehappy.com/">upgrade your browser</a> to improve
        your experience and security.
      </p>
    <![endif]-->

	<!-- Preloader -->
	<div class="preloader">
		<div class="preloader-inner">
			<div class="preloader-icon">
				<span></span>
				<span></span>
			</div>
		</div>
	</div>
	<!-- /End Preloader -->

	<!-- Start Header Area -->
	<header class="header navbar-area">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-12">
					<div class="nav-inner">
						<nav class="navbar navbar-expand-lg">
							<a class="navbar-brand" th:href="@{/index}">
								<img src="/assets/images/logo/header/nplitlogo.svg" alt="Logo">
							</a>
							<button class="navbar-toggler mobile-menu-btn" type="button" data-bs-toggle="collapse"
								data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
								aria-expanded="false" aria-label="Toggle navigation">
								<span class="toggler-icon"> </span>
								<span class="toggler-icon"> </span>
								<span class="toggler-icon"> </span>
							</button>
							<div class="collapse navbar-collapse sub-menu-bar" id="navbarSupportedContent">
								<ul id="nav" class="navbar-nav ms-auto">
									<li class="nav-item">
										<a class="dd-menu collapsed" th:href="@{/index}"
											aria-label="Toggle navigation">Home</a>

									</li>
									<li class="nav-item">
										<a th:href="@{/registerlist}" aria-label="Toggle navigation">카테고리</a>
										<ul class="sub-menu mega-menu collapse" id="submenu-1-4">
											<!-- <li class="mega-menu-title">Dashboard</li> -->
											<li class="nav-item"><a th:href="@{/registerlist?category=패션/잡화}">패션/잡화</a>
											</li>
											<li class="nav-item"><a
													th:href="@{/registerlist?category=가전/디지털}">가전/디지털</a></li>
											<li class="nav-item"><a th:href="@{/registerlist?category=라이프}">라이프</a>
											<li class="nav-item"><a th:href="@{/registerlist?category=배달음식}">배달음식</a>
											</li>
											<li class="nav-item"><a th:href="@{/registerlist?category=홈쉐어링}">홈쉐어링</a>
											</li>
									</li>
									<li class="nav-item"><a th:href="@{/registerlist?category=식품}">식품</a></li>
									<li class="nav-item"><a th:href="@{/registerlist?category=구독서비스}">구독서비스</a></li>
									<li class="nav-item"><a th:href="@{/registerlist?category=기타}">기타</a></li>
								</ul>
								</li>

								<!--예진 로그인 안했을 경우 내 근처 못들어가게-->
								<li class="nav-item">
									<a class="active dd-menu collapsed" th:if="${#strings.isEmpty(session.login)}"
										onclick="alert('로그인이 필요한 서비스 입니다.')" th:href="@{/login}"
										aria-label="Toggle navigation">내 근처</a>
									<a class="active dd-menu collapsed" th:if="${not #strings.isEmpty(session.login)}"
										th:href="@{/near_me}" aria-label="Toggle navigation">내 근처</a>
								</li>

								<!--예진 로그인 안했을경우 마이페이지 못들어가게-->
								<li class="nav-item" th:if="${#strings.isEmpty(session.login)}" th:href="@{/login}"
									onclick="alert('로그인이 필요한 서비스 입니다.')">
									<a class="dd-menu collapsed" th:href="@{/login}" aria-label="Toggle navigation">마이
										페이지</a>
									<ul class="sub-menu collapse" id="submenu-1-5">
										<li class="nav-item"><a th:href="@{/login}">내 프로필 보기</a>
										</li>
										<li class="nav-item"><a th:href="@{/login}">개인정보 수정</a></li>
										<li class="nav-item"><a th:href="@{/login}">내가 등록한 쉐어링</a></li>
										<li class="nav-item"><a th:href="@{/login}">내가 참여중인 쉐어링</a></li>
										<li class="nav-item"><a th:href="@{/login}">내가 찜한 쉐어링</a></li>
										<li class="nav-item"><a th:href="@{/myquestion_list}">1:1 문의 내역</a></li>
									</ul>
								</li>

								<li class="nav-item" th:if="${not #strings.isEmpty(session.login)}">
									<!--예진 로그인 했을경우-->
									<a class="dd-menu collapsed" th:href="@{/profile_show}"
										aria-label="Toggle navigation">마이 페이지</a>
									<ul class="sub-menu collapse" id="submenu-1-5">
										<li class="nav-item"><a th:href="@{/profile_show}">내 프로필 보기</a>
										</li>
										<li class="nav-item"><a th:href="@{/profile_update}">개인정보 수정</a></li>
										<li class="nav-item"><a th:href="@{/sharing_registered}">내가 등록한 쉐어링</a></li>
										<li class="nav-item"><a th:href="@{/sharing_participate}">내가 참여중인 쉐어링</a></li>
										<li class="nav-item"><a th:href="@{/sharing_like}">내가 찜한 쉐어링</a></li>
										<li class="nav-item"><a th:href="@{/selectMyQuestion}">1:1 문의 내역</a></li>
									</ul>
								</li>
								<!--예진 로그인 안했을 경우 내채팅 못들어가게-->
								<li class="nav-item">
									<a class="dd-menu collapsed" th:if="${#strings.isEmpty(session.login)}"
										onclick="alert('로그인이 필요한 서비스 입니다.')" th:href="@{/selectMyChatting}"
										aria-label="Toggle navigation">내 채팅</a>
									<a class="dd-menu collapsed" th:if="${not #strings.isEmpty(session.login)}"
										th:href="@{/selectMyChatting}" aria-label="Toggle navigation">내 채팅</a>
								</li>

								<li style="position: relative; top: 2.2rem;">
									<span class="notranslate">
										<div id="google_translate_element" style="display:none;"></div>
										<!-- "새 번역 링크 UI" -->

										<ul class="translation-links" style="list-style:none;">
											<li style="float:left; margin-right:0.5rem;"><i class="fas fa-circle"
													style="color:#cfb0cf; font-size:0.5rem;"></i></li>
											<li style="float:left"><a href="javascript:void(0)" class="english"
													data-lang="en">En</a></li>
											<li style="float:left">&nbsp &#124; &nbsp</li>
											<li style="float:left"><a href="javascript:void(0)" class="korean"
													data-lang="ko">Ko</a></li>
											<li style="float:left; margin-left:0.5rem;"><i class="fas fa-circle"
													style="color:#cfb0cf; font-size:0.5rem;"></i></li>
										</ul>

										<script
											src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
										<script type="text/javascript">
											/* 구글 번역 초기화 */
											function googleTranslateElementInit() {new google.translate.TranslateElement({pageLanguage: 'ko', autoDisplay: true}, 'google_translate_element');}
										</script>
										<script type="text/javascript">
											/* 새 UI 선택 클릭 이벤트가 발생하면
											   감춤 처리한 구글 번역 콤보리스트에
											   선택한 언어를 적용해 변경 이벤트를 발생시키는 코드  */
											document.querySelector('.translation-links').addEventListener('click', function (event) {
												let el = event.target;
												if (el != null) {
													while (el.nodeName == 'FONT') {el = el.parentElement;}//data-lang 속성이 있는 태그 찾기
													const tolang = el.dataset.lang; // 변경할 언어 코드 얻기
													const gtcombo = document.querySelector('.goog-te-combo');
													if (gtcombo == null) {
														alert("Error: Could not find Google translate Combolist.");
														return false;
													}
													gtcombo.value = tolang; // 변경할 언어 적용
													gtcombo.dispatchEvent(new Event('change')); // 변경 이벤트 트리거
												}
												return false;
											});
										</script>
									</span>
								</li>

								</ul>
							</div> <!-- navbar collapse -->

							<div class="login-button">
								<ul>
									<li>
										<a th:if="${not #strings.isEmpty(session.login)}">
											<a th:href="@{/profile_show}" class="see-all"><span
													th:text="${session.login.name}"> </span>님 환영합니다.</a>
										</a>
										<a th:if="${#strings.isEmpty(session.login)}" th:href="@{/login}">
											<i class="lni lni-enter"> </i>로그인
										</a>
									</li>

									<li>
										<a th:if="${not #strings.isEmpty(session.login)}" th:href="@{/logout}">
											<i class="lni lni-enter"> </i> 로그아웃
										</a>
										<a th:if="${#strings.isEmpty(session.login)}" th:href="@{/join}">
											<i class="lni lni-user"> </i> 가입하기
										</a>
									</li>
								</ul>
							</div>

							<div class="button header-button">
								<!--로그인 안되어있을경우 쉐어링 등록 불가-->
								<a th:if="${#strings.isEmpty(session.login)}" onclick="alert('로그인이 필요한 서비스 입니다.')"
									th:href="@{/login}" class="btn">쉐어링 등록하기</a>
								<a th:if="${not #strings.isEmpty(session.login)}" th:href="@{/register_view}"
									class="btn">쉐어링 등록하기</a>
							</div>
						</nav> <!-- navbar -->
					</div>
				</div>
			</div> <!-- row -->
		</div> <!-- container -->
	</header>
	<!-- End Header Area -->


	<!-- Start Breadcrumbs -->
	<div class="breadcrumbs">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 col-md-6 col-12">
					<div class="breadcrumbs-content">
						<h1 class="page-title">내 주변</h1>
					</div>
				</div>
				<div class="col-lg-6 col-md-6 col-12">
					<ul class="breadcrumb-nav">
						<li><a href="1.index.html">Home</a></li>
						<li>내 주변</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- End Breadcrumbs -->


	<!-- Start Item Details -->
	<section class="item-details">

		<div class="top-area container">
			<div class="row">
				<div class="col-md-8">
					<div id="map" style="width: 100%; height: 86vh;"> </div>
					<div class="link">
						<a href="javascript:void(0);" style="margin-top:0.5rem;"
							onclick="window.open('http://fiy.daum.net/fiy/map/CsGeneral.daum', '_blank', 'width=981, height=650')">
							혹시 주소 결과가 잘못 나오는 경우에는 여기에 제보해주세요.
						</a>
					</div>
				</div>
				<div class="col-md-4 near-info">
					<div class="product-info">
						<div class="info-title">
							<h4 class="title">내 주변 쉐어링</h4>
							<!-- 유미 검색창 UI 구현 -->
							<div class="info-textbox">
								<form action="registerlist_nearme" method="post" name="search-form"
									class="sharing-near-search">
									<div>
										<!-- <label for="gps-textbox"><i class="fas fa-map-marked-alt"> </i></label>-->
										<input type="text" name="SearchAddress" autocomplete="off" class="gps-textbox"
											id="gps-textbox" placeholder="위치 검색하기">
									</div>
									<div>
										<button type="submit" id="gps-textbox"><i
												class="lni lni-search-alt"></i></button>
									</div>
								</form>
							</div>
						</div>

						<div class="near-scroll">
							<div class="list-info" th:each="register : ${registerlist}">
								<ul>
									<li class="list-info-imgbox">
										<a th:if="${register.filename != null}"
											th:href="@{/details(seq=${register.seq})}">
											<img th:src="${register.filename}" alt="#">
										</a>
										<a th:if="${register.filename == null}"
											th:href="@{/details(seq=${register.seq})}">
											<img th:src="@{/assets/images/default_img.png}">
										</a>

										<div class="user_cont">
											<i class="fas fa-user">
												<a th:text="${register.maxNum}"> </a>
												<span>명</span>
											</i>
										</div>
									</li>
									<li class="list-info-content-box">
										<div>
											<h6 class="content-box-title" th:href="@{/details(seq=${register.seq})}"
												th:text="${register.title}"></h6>
										</div>
										<div><span>쉐어링 금액&#58;</span>
											<a th:text="${register.price}"> </a> 원
										</div>

										<div class="info-btn">
											<!--참가하기 버튼 : 로그인 했을 경우-->
											<button class="info-btn-b" th:if="${not #strings.isEmpty(session.login)}"
												th:onclick="|window.location.href='@{/roomJoin(roomId=${register.seq})}'|">
												<i class="far fa-comments"></i>
												참가 하기
											</button>
										</div>
										<!--예진 참가하기 버튼 새창 띄워 채팅 패이지로 연결  -->
										<!--참가하기 버튼 : 로그인 했을 경우-->
										<!--<button th:if="${not #strings.isEmpty(session.login)}"
			                                 th:onclick="|window.location.href='@{/roomJoin(roomId=${board.seq})}'|">
			                                 <i class="far fa-comments"></i>
			                                 <span>참가 하기</span>
			                              </button>-->

										<!--참가하기 버튼 : 로그인 x-->
										<!--<button th:if="${#strings.isEmpty(session.login)}"
			                                 onClick="location.href='login';alert('로그인이 필요한 서비스 입니다.')">
			                                 <i class="far fa-comments"></i>
			                                 <span>참가 하기</span>
			                              </button>-->


										<!-- <div><span>총 인원&#58;</span>
                                            <p>3/4</p>
                                        </div> -->
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<!--페이지 번호 -->
				<!-- <div class="pagination left">
                        <ul class="pagination-list">
                            <li><a href="javascript:void(0)">1</a></li>

                            <li class="active"><a href="javascript:void(0)">2</a></li>
                            <li><a href="javascript:void(0)">3</a></li>
                            <li><a href="javascript:void(0)">4</a></li>
                            <li><a href="javascript:void(0)"><i class="lni lni-chevron-right"></i></a></li>
                        </ul>
                    </div> -->
				<!--페이지 번호 END -->
			</div>
		</div>

	</section>
	<footer class="footer">
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<!-- Single Widget -->
					<div class="single-footer mobile-app">
						<a><img src="/assets/images/footer/footer_nplitlogo.svg" alt="Logo" ;
								style="width:300px; height:300px"></a>
					</div>
					<!-- End Single Widget -->
				</div>
				<div class="col-md-4" style="display:inline;">
					<div class="single-footer f-contact">
						<h3>Contact</h3>
						<ul>
							<li>서울 강남구 강남대로94길 20, <br> 삼오빌딩(5층 ~ 9층)</li>
							<li>문의 : 02-3486-9600 | 팩스 : 02.6007.1298 <br> 사업자등록번호 : 214-85-24928</li>
							<li>(주)비트컴퓨터 강남본원 대표이사 : 허원준</li>
						</ul>
					</div>
				</div>

				<div class="col-md-4">
					<!-- Single Widget -->
					<div class="footer-bottom">
						<div class="container">
							<div class="inner">
								<!-- <div class="row"> -->
								<!-- <div class="col-6"> -->
								<div class="content">
									<div class="content-top">
										<p>통신판매업 신고번호 : 제 서초-00098호 <br> 개인정보보호관리책임자 : 박진형</p>
									</div>
									<p>이용약관 | 개인정보취급방침 | 위치기반서비스 이용약관</p>
									<ul class="footer-social">
										<li><a href="javascript:void(0)"><i class="lni lni-facebook-filled"></i></a>
										</li>
										<li><a href="javascript:void(0)"><i class="lni lni-twitter-original"></i></a>
										</li>
										<li><a href="javascript:void(0)"><i class="lni lni-youtube"></i></a>
										</li>
										<li><a href="javascript:void(0)"><i class="lni lni-linkedin-original"></i></a>
										</li>
									</ul>
									<!-- <i class="fas fa-link"></i> -->

								</div>
								<!-- </div> -->
								<!-- </div> -->
							</div>
						</div>

						<!-- End Single Widget -->
					</div>
				</div>
			</div>
		</div>
	</footer>


	<!-- ========================= scroll-top ========================= -->
	<a href="#" class="scroll-top btn-hover">
		<i class="lni lni-chevron-up"></i>
	</a>

	<!-- ========================= JS here ========================= -->
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/wow.min.js"></script>
	<script src="assets/js/tiny-slider.js"></script>
	<script src="assets/js/glightbox.min.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="assets/js/jquery-3.6.0.min.js"></script>

	<!-- 하윤 지도 시작 -->
	<script type="text/javascript"
		src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9ecc8e9f939d797e6e6a52bcafefb3ed&libraries=services"></script>

	<script th:inline="javascript">
		var registerList = [[${registerlist}]];
		var register = new Object();
		var addressList = [];
		var titleList = [];
		var seqList = [];
		var coordList = [];
		var title;

		registerList.forEach(function (item) {
			addressList.push(item.address);
			titleList.push(item.title);
			seqList.push(item.seq);
		});

		console.log(addressList);

		var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
			mapOption = {
				center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
				level: 7 // 지도의 확대 레벨
			};

		// 지도를 표시할 div와 지도 옵션으로 지도를 생성합니다
		var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

		var geocoder = new kakao.maps.services.Geocoder();

		addressList.forEach(function (addr, index) {
			geocoder.addressSearch(addr, function (result, status) {
				// 정상적으로 검색이 완료됐으면 
				console.log(result);
				if (status === kakao.maps.services.Status.OK) {
					console.log(result[0].x);
					var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
					coordList.push(coords);

					var imageSrc = '/assets/images/logo/nplitmaker.svg', // 마커이미지의 주소입니다    
						imageSize = new kakao.maps.Size(50, 50), // 마커이미지의 크기입니다
						imageOption = {offset: new kakao.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.

					// 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
					var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption);

					// 결과값으로 받은 위치를 마커로 표시합니다
					var marker = new kakao.maps.Marker({
						map: map,
						position: coords,
						image: markerImage,
						clickable: true
					});

					// 인포윈도우로 장소에 대한 설명을 표시합니다
					var infowindow = new kakao.maps.InfoWindow({
						content: '<div style="width:150px;text-align:center;padding:6px 0;">' + titleList[index] + '</div>'
					});
					infowindow.open(map, marker);

					// 마커에 클릭이벤트를 등록합니다
					kakao.maps.event.addListener(marker, 'click', function () {
						// 마커 위에 인포윈도우를 표시합니다
						fnMoveDetail(seqList[index]);
					});
				}
			});
		});

		function fnMoveDetail(seq) {
			console.log(seq);
			location.href = "details?seq=" + seq;
		}

		map.setCenter(coordList[2]);

	</script>
	<script src="https://kit.fontawesome.com/4a6a853753.js" crossorigin="anonymous"></script>


</body>

</html>